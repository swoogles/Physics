<!DOCTYPE html>
<html><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Multi-Dimensional Arrays - C++ Forum</title>
<link rel="shortcut icon" type="image/x-icon" href="http://www.cplusplus.com/favicon.ico">
<link rel="stylesheet" type="text/css" href="Multi-Dimensional%20Arrays%20-%20C++%20Forum_files/main.css">
<script src="Multi-Dimensional%20Arrays%20-%20C++%20Forum_files/ga.js" async="" type="text/javascript"></script><script src="Multi-Dimensional%20Arrays%20-%20C++%20Forum_files/main.js" type="text/javascript"></script>
</head>
<body>
<div id="I_top">
<div id="I_header">
<div id="I_logo"><a href="http://www.cplusplus.com/" title="cplusplus.com"><div></div></a></div>
<div id="I_search">
<form id="search" action="/search.do" method="get">
Search: <input name="q" size="20" class="txt"> <input value="Go" class="btn" type="submit">
</form>
</div>
<div id="I_bar">
<ul>
<li><a href="http://www.cplusplus.com/forum/">Forum</a></li>
<li><a href="http://www.cplusplus.com/forum/articles/">Articles</a></li>
<li class="here">Multi-Dimensional Arrays</li>
</ul>
</div>
<div id="I_user" class="C_LoginBox"><span title="ajax"></span><div style="display: block;" id="I_corner"><div id="I_cornerinner"><div id="I_userid">Not logged in</div></div></div><div id="I_userbuttons"><a href="http://www.cplusplus.com/user/access.cgi?w=signup">register</a><a id="I_btnlogin" href="javascript:LBI_user.modal(1)">log in</a></div><div style="display: none;" id="I_fold"><div class="deco"></div><form style="display: none;" name="I_loginform" id="I_loginform" action="/user/access.cgi" onsubmit="LBI_user.login(); return false;" method="post"><div class="fields"><input name="w" value="login" type="hidden"><input name="y" value="1" type="hidden"><input name="to" value="http://www.cplusplus.com/forum/articles/7459/" type="hidden">user name: <input class="txt" name="l" size="8" title="Type user name" type="text"><br>password: <input class="txt" name="p" size="8" title="Type password" type="password"><br><input class="chk" name="rememberme" id="rememberme" value="1" type="checkbox"><label for="rememberme">remember me</label>&nbsp;<input class="btn" value="sign in" type="submit"><br><div class="forgot"><a href="http://www.cplusplus.com/user/access.cgi?w=lostpass">forgot your password?</a></div></div><div class="openid">or sign in using:<br><a class="google" href="http://www.cplusplus.com/user/access.cgi?w=login&amp;y=1&amp;pr=google&amp;to=%2Fforum%2Farticles%2F7459%2F" title="Sign in using your google account"><span></span></a><a class="yahoo" href="http://www.cplusplus.com/user/access.cgi?w=login&amp;y=1&amp;pr=yahoo&amp;to=%2Fforum%2Farticles%2F7459%2F" title="Sign in using your Yahoo! account"><span></span></a> </div></form><div style="display: none;" id="I_loginwait"></div><div style="display: none;" id="I_loginfail"><div id="I_loginfailtext"></div><a class="C_bRepeat" href="javascript:LBI_user.modal(1)">try again</a><a class="C_bCancel" href="javascript:LBI_user.modal(0)">cancel</a><div class="forgot"><a href="http://www.cplusplus.com/user/access.cgi?w=lostpass">forgot your password?</a></div></div><div class="close"><a href="javascript:LBI_user.modal(0)" title="cancel log in"><span></span></a></div></div></div></div></div>
<div id="I_mid">
<div id="I_wrap">
<div style="height: 776px;" id="I_minheight"></div>
<div id="I_main">
<div class="C_ad728">
<script type="text/javascript"><!--
google_ad_client = "ca-pub-7688470879129516";
google_ad_slot = "7973859818";
google_ad_width = 728;
google_ad_height = 90;
//-->
</script>
<script type="text/javascript" src="Multi-Dimensional%20Arrays%20-%20C++%20Forum_files/show_ads.js">
</script><ins style="display:inline-table;border:none;height:90px;margin:0;padding:0;position:relative;visibility:visible;width:728px"><ins id="aswift_0_anchor" style="display:block;border:none;height:90px;margin:0;padding:0;position:relative;visibility:visible;width:728px"><iframe marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" onload="var i=this.id,s=window.google_iframe_oncopy,H=s&amp;&amp;s.handlers,h=H&amp;&amp;H[i],w=this.contentWindow,d;try{d=w.document}catch(e){}if(h&amp;&amp;d&amp;&amp;(!d.body||!d.body.firstChild)){if(h.call){setTimeout(h,0)}else if(h.match){w.location.replace(h)}}" id="aswift_0" name="aswift_0" style="left:0;position:absolute;top:0;" frameborder="0" height="90" scrolling="no" width="728"></iframe></ins></ins>
</div><div id="I_content"><h3><div class="C_ico default" title="post">&nbsp;</div> Multi-Dimensional Arrays</h3><span id="CH_edttl"></span><span class="rootdatPost" title="7459,root,0,-1,10,0"></span><div id="CH_PostList"><div class="C_forPost" id="msg34417"><span title="34417,11177,1023,2731,1"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg34417" title="Link to this post"><img src="Multi-Dimensional%20Arrays%20-%20C++%20Forum_files/link.png" height="8" width="16"></a> <span id="CH_zTm74daa01d45" title="Tue, 03 Feb 2009 20:11:34 +0000">Feb 3, 2009 at 1:11pm</span><script type="text/javascript">WhenId('CH_zTm74daa01d45');</script><noscript>Feb 3, 2009 at 8:11pm UTC</noscript></div>
<div class="dwho"><a href="http://www.cplusplus.com/user/Zaita/"><b>Zaita</b> (2731)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i34417">
This is another topic we get asked quite a bit.<br>
- How do I do a 2D/3D Array?<br>
<br>
When I also started working with multi-dimensional arrays I found it 
hard to find the answers I wanted too. So I'll post up some info that 
will hopefully help other people. I'll go over both of the 2 major 
methods (Vector vs Pointer).<br>
<br>
<b>Vector based multi-dimensional arrays</b><br>
Vectors are a STL container that allow you to store pretty much anything
 in them. When used correctly they can be very powerful containers.<br>
<br>
They provide an added benefit that they will automatically remove the 
memory they use when they go out of scope. This means that objects 
stored within a vector do not need to be de-allocated (but pointers to 
objects do).<br>
<br>
You can also do some interesting things with dynamic multi-dimensional 
arrays with vectors. For example, if you only allocate the first 
dimension, then use the .push_back() to add records to the 2nd dimension
 it's no longer a grid, but an array with a dynamically sized 2nd 
dimension (much like a street of buildings each with a different amount 
of floors). This functionality can be achieved using pointers, but is 
much harder to do.<br>
<br>
A simple 2D Array with vectors:<br>
<div class="auto"><table class="snippet"><tbody><tr><td class="rownum"><pre><code>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br></code></pre></td>
<td class="source"><pre><code><dfn>#include &lt;vector&gt;</dfn>
<var>using</var> std::vector;

<dfn>#define HEIGHT 5</dfn>
<dfn>#define WIDTH 3</dfn>

<var>int</var> main() {
  vector&lt;vector&lt;<var>double</var>&gt; &gt; array2D;

  <cite>// Set up sizes. (HEIGHT x WIDTH)</cite>
  array2D.resize(HEIGHT);
  <var>for</var> (<var>int</var> i = 0; i &lt; HEIGHT; ++i)
    array2D[i].resize(WIDTH);

  <cite>// Put some values in</cite>
  array2D[1][2] = 6.0;
  array2D[3][1] = 5.5;

  <var>return</var> 0;
}</code></pre></td></tr></tbody></table></div>
<br>
<br>
A 3D Array with vectors.<br>
<div class="auto"><table class="snippet"><tbody><tr><td class="rownum"><pre><code>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br></code></pre></td>
<td class="source"><pre><code><dfn>#include &lt;vector&gt;</dfn>
<var>using</var> std::vector;

<dfn>#define HEIGHT 5</dfn>
<dfn>#define WIDTH 3</dfn>
<dfn>#define DEPTH 7</dfn>

<var>int</var> main() {
  vector&lt;vector&lt;vector&lt;<var>double</var>&gt; &gt; &gt; array3D;

  <cite>// Set up sizes. (HEIGHT x WIDTH)</cite>
  array3D.resize(HEIGHT);
  <var>for</var> (<var>int</var> i = 0; i &lt; HEIGHT; ++i) {
    array3D[i].resize(WIDTH);

    <var>for</var> (<var>int</var> j = 0; j &lt; WIDTH; ++j)
      array3D[i][j].resize(DEPTH);
  }

  <cite>// Put some values in</cite>
  array3D[1][2][5] = 6.0;
  array3D[3][1][4] = 5.5;

  <var>return</var> 0;
}</code></pre></td></tr></tbody></table></div>
<br>
<br>
<b>Pointer based multi-dimensional arrays</b><br>
Pointer based multi-dimensional arrays provide you with a more raw 
access to the objects. The benefits can be added speed and you can apply
 custom optimizations to them.<br>
<br>
Note: There are ways you can optimize this by combining the 2 dimensions
 into a single dimension (HEIGHTxWIDTH). I leave the discussion of this 
out, as it's a more advanced topic for people already familiar with this
 topic.<br>
<br>
A simple 2D Array:<br>
<div class="auto"><table class="snippet"><tbody><tr><td class="rownum"><pre><code>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br></code></pre></td>
<td class="source"><pre><code><dfn>#define HEIGHT 5</dfn>
<dfn>#define WIDTH 3</dfn>

<var>int</var> main() {
  <var>double</var> **p2DArray;

  <cite>// Allocate memory</cite>
  p2DArray = <var>new</var> <var>double</var>*[HEIGHT];
  <var>for</var> (<var>int</var> i = 0; i &lt; HEIGHT; ++i)
    p2DArray[i] = <var>new</var> <var>double</var>[WIDTH];

  <cite>// Assign values</cite>
  p2DArray[0][0] = 3.6;
  p2DArray[1][2] = 4.0;

  <cite>// De-Allocate memory to prevent memory leak</cite>
  <var>for</var> (<var>int</var> i = 0; i &lt; HEIGHT; ++i)
    <var>delete</var> [] p2DArray[i];
  <var>delete</var> [] p2DArray;

  <var>return</var> 0;
}</code></pre></td></tr></tbody></table></div>
<br>
<br>
A 3D Array:<br>
<div class="auto"><table class="snippet"><tbody><tr><td class="rownum"><pre><code>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br></code></pre></td>
<td class="source"><pre><code><dfn>#define HEIGHT 5</dfn>
<dfn>#define WIDTH 3</dfn>
<dfn>#define DEPTH 7</dfn>

<var>int</var> main() {
  <var>double</var> ***p2DArray;

  <cite>// Allocate memory</cite>
  p2DArray = <var>new</var> <var>double</var>**[HEIGHT];
  <var>for</var> (<var>int</var> i = 0; i &lt; HEIGHT; ++i) {
    p2DArray[i] = <var>new</var> <var>double</var>*[WIDTH];

    <var>for</var> (<var>int</var> j = 0; j &lt; WIDTH; ++j)
      p2DArray[i][j] = <var>new</var> <var>double</var>[DEPTH];
  }

  <cite>// Assign values</cite>
  p2DArray[0][0][0] = 3.6;
  p2DArray[1][2][4] = 4.0;

  <cite>// De-Allocate memory to prevent memory leak</cite>
  <var>for</var> (<var>int</var> i = 0; i &lt; HEIGHT; ++i) {
    <var>for</var> (<var>int</var> j = 0; j &lt; WIDTH; ++j)
      <var>delete</var> [] p2DArray[i][j];

    <var>delete</var> [] p2DArray[i];
  }
  <var>delete</var> [] p2DArray;

  <var>return</var> 0;
}</code></pre></td></tr></tbody></table></div>
<br>
<br>
One final thing to note. When creating dynamic arrays with your own 
object types, you cannot overload the constructor. The ISO standard 
forbids this, and you must initialize the values on the objects later. 
All objects allocated into arrays must utilize the default constructor.<br>
<br>
The above code snippets should compile on both Windows and Linux with no problems.<br>
<br>
<b>Recommendations</b><br>
Unless your application has an extreme need to be highly optimized, and 
you are quite proficient at C++ memory management, you will want to use 
the vector based approach. This method is a lot easier to manage, 
especially if you are just learning C++.
</div>
<div class="dhow">
<span class="dbtn" id="CH_btn34417"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg34513"><span title="34513,16326,1023,1055,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg34513" title="Link to this post"><img src="Multi-Dimensional%20Arrays%20-%20C++%20Forum_files/link.png" height="8" width="16"></a> <span id="CH_zTmc0dd80e53d" title="Wed, 04 Feb 2009 12:00:26 +0000">Feb 4, 2009 at 5:00am</span><script type="text/javascript">WhenId('CH_zTmc0dd80e53d');</script><noscript>Feb 4, 2009 at 12:00pm UTC</noscript></div>
<div class="dwho"><a href="http://www.cplusplus.com/user/Mythios/"><b>Mythios</b> (1055)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i34513">
Very nice Zaita, once you understand them they are more easier than you 
think. But you explanation here covers it quite well. So for those of 
you who don't I believe this will be helpful.<br>
<br>
Awesome work ;)<br>
<br>
Shame we cant ++rep; 
</div>
<div class="dhow">
<span class="dbtn" id="CH_btn34513"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg36877"><span title="36877,16326,1023,1055,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg36877" title="Link to this post"><img src="Multi-Dimensional%20Arrays%20-%20C++%20Forum_files/link.png" height="8" width="16"></a> <span id="CH_zTm12d7c3c769" title="Fri, 20 Feb 2009 04:42:08 +0000">Feb 19, 2009 at 9:42pm</span><script type="text/javascript">WhenId('CH_zTm12d7c3c769');</script><noscript>Feb 20, 2009 at 4:42am UTC</noscript></div>
<div class="dwho"><a href="http://www.cplusplus.com/user/Mythios/"><b>Mythios</b> (1055)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i36877">
You should possibly add how to pass 2d and 3d arrays to functions etc? 
Would be a good help for a lot of people as that question goes around a 
fair bit.
</div>
<div class="dhow">
<span class="dbtn" id="CH_btn36877"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg38305"><span title="38305,15609,1023,34,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg38305" title="Link to this post"><img src="Multi-Dimensional%20Arrays%20-%20C++%20Forum_files/link.png" height="8" width="16"></a> <span id="CH_zTm8c1224280c" title="Mon, 02 Mar 2009 03:08:05 +0000">Mar 1, 2009 at 8:08pm</span><script type="text/javascript">WhenId('CH_zTm8c1224280c');</script><noscript>Mar 2, 2009 at 3:08am UTC</noscript></div>
<div class="dwho"><a href="http://www.cplusplus.com/user/cascade384/"><b>cascade384</b> (34)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i38305">
 Would it be something like this?<span class="auto"><code class="source"><var>void</var> function(<var>double</var> array[][WIDTH])</code></span>
</div>
<div class="dhow">
<span class="dbtn" id="CH_btn38305"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg38389"><span title="38389,11177,1023,2731,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg38389" title="Link to this post"><img src="Multi-Dimensional%20Arrays%20-%20C++%20Forum_files/link.png" height="8" width="16"></a> <span id="CH_zTm463a8f9694" title="Mon, 02 Mar 2009 20:37:49 +0000">Mar 2, 2009 at 1:37pm</span><script type="text/javascript">WhenId('CH_zTm463a8f9694');</script><noscript>Mar 2, 2009 at 8:37pm UTC</noscript></div>
<div class="dwho"><a href="http://www.cplusplus.com/user/Zaita/"><b>Zaita</b> (2731)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i38389">
You can pass them by pointer.<br>
<br>
e.g<br>
<span class="auto"><code class="source"><var>void</var> doSomethingWith2D(<var>double</var> **Array);</code></span><br>
or<br>
<span class="auto"><code class="source">voud doSomethingWith2D(vector&lt;vector&lt;<var>double</var>&gt; &gt; &amp;Array);</code></span>
</div>
<div class="dhow">
<span class="sedited">Last edited on <span id="CH_zTm9f9fd862dc" title="Mon, 02 Mar 2009 20:38:00 +0000">Mar 2, 2009 at 1:38pm</span><script type="text/javascript">WhenId('CH_zTm9f9fd862dc');</script><noscript>Mar 2, 2009 at 8:38pm UTC</noscript></span>
<span class="dbtn" id="CH_btn38389"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg39396"><span title="39396,16326,1023,1055,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg39396" title="Link to this post"><img src="Multi-Dimensional%20Arrays%20-%20C++%20Forum_files/link.png" height="8" width="16"></a> <span id="CH_zTmc788a66abf" title="Sun, 08 Mar 2009 10:21:19 +0000">Mar 8, 2009 at 4:21am</span><script type="text/javascript">WhenId('CH_zTmc788a66abf');</script><noscript>Mar 8, 2009 at 10:21am UTC</noscript></div>
<div class="dwho"><a href="http://www.cplusplus.com/user/Mythios/"><b>Mythios</b> (1055)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i39396">
You can also pass them by reference <br>
<div class="auto"><table class="snippet"><tbody><tr><td class="rownum"><pre><code>&nbsp;</code></pre></td>
<td class="source"><pre><code><var>void</var> function( <var>int</var> (&amp;myArray)[HEIGHT][WIDTH]</code></pre></td></tr></tbody></table></div>
<br>
<br>
According to C++ Primer 4th Edition
</div>
<div class="dhow">
<span class="dbtn" id="CH_btn39396"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg48202"><span title="48202,21586,1023,82,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg48202" title="Link to this post"><img src="Multi-Dimensional%20Arrays%20-%20C++%20Forum_files/link.png" height="8" width="16"></a> <span id="CH_zTm025efca249" title="Fri, 24 Apr 2009 23:10:39 +0000">Apr 24, 2009 at 5:10pm</span><script type="text/javascript">WhenId('CH_zTm025efca249');</script><noscript>Apr 24, 2009 at 11:10pm UTC</noscript></div>
<div class="dwho"><a href="http://www.cplusplus.com/user/vRltwE/"><b>vRltwE</b> (82)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i48202">
And how can a method return a vector?<br>
<br>
How can I do to pass matrix from method matrix_read to main?<br>
<br>
<div class="auto"><table class="snippet"><tbody><tr><td class="rownum"><pre><code>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>33<br>34<br>35<br>36<br>37<br>38<br>39<br>40<br>41<br>42<br>43<br>44<br>45<br>46<br>47<br>48<br>49<br>50<br>51<br>52<br>53<br>54<br>55<br>56<br>57<br>58<br>59<br>60<br>61<br>62<br>63<br>64<br>65<br>66<br>67<br>68<br>69<br>70<br>71<br>72<br>73<br>74<br>75<br>76<br>77<br>78<br>79<br>80<br>81<br>82<br>83<br>84<br>85<br>86<br>87<br>88<br>89<br>90<br>91<br>92<br>93<br>94<br>95<br>96<br>97<br>98<br>99<br>100<br>101<br>102<br>103<br>104<br>105<br>106<br>107<br></code></pre></td>
<td class="source"><pre><code><cite>/* 
 * File:   main.cpp
 * Author: cristiano
 *
 * Created on April 22, 2009, 11:32 AM
 */</cite>

<dfn>#include &lt;stdlib.h&gt;</dfn>
<dfn>#include &lt;iostream&gt;</dfn>
<dfn>#include &lt;fstream&gt;</dfn>
<dfn>#include &lt;sstream&gt;</dfn>
<dfn>#include &lt;vector&gt;</dfn>

<var>using</var> <var>namespace</var> std;
<cite>/*
 * 
 */</cite>

<var>int</var> matrix_lines(istream &amp;iFile) {
<cite>// Método para obter o número linhas da matriz.</cite>
    iFile.clear();
    iFile.seekg(0);
    <var>int</var> lines = 0;
    string line;
    <var>while</var>(!iFile.eof()) {
        getline (iFile, line);
        lines++;
    }
    cout &lt;&lt; <kbd>"Número de linhas: "</kbd> &lt;&lt; lines-1 &lt;&lt; endl;
    <var>return</var> lines-1;
}

<var>int</var> matrix_cols(istream &amp;iFile) {
<cite>// Método para obter o número de colunas da matriz.</cite>
    iFile.clear();
    iFile.seekg(0);

    string line;
    <var>double</var> n;
    <var>int</var> cols = 0;

    getline (iFile, line);
<cite>//    cout &lt;&lt; line &lt;&lt; endl;</cite>

    stringstream is(line);
    n = 0;
    <var>while</var> (is &gt;&gt; n) {
<cite>//        cout &lt;&lt; n &lt;&lt; endl;</cite>
        cols++;
    }


<cite>//</cite>
    cout &lt;&lt; <kbd>"Número de colunas: "</kbd> &lt;&lt; cols &lt;&lt; endl;
    <var>return</var> cols;
}

<var>double</var>** matrix_read(istream &amp;iFile, <var>int</var> lines, <var>int</var> cols) {
<cite>// Método para ler a matriz.</cite>

    vector&lt;vector&lt;<var>double</var>&gt; &gt; matrix;
    matrix.resize(cols);
    <var>for</var>(<var>int</var> i = 0; i &lt; cols; i++)
        matrix[i].resize(lines);

    <var>double</var> value;
    iFile.clear();
    iFile.seekg(0);
    
    <var>for</var>(<var>int</var> i = 0; i &lt; lines; i++){
        <var>for</var>(<var>int</var> j = 0; j &lt; cols; j++){
           matrix[i][j]  = (iFile &gt;&gt; value,value);
           cout &lt;&lt; matrix[i][j] &lt;&lt; <kbd>" "</kbd>;
        }
        cout &lt;&lt; <kbd>"\n"</kbd>;
    }
    <var>return</var> matrix;
}

<var>int</var> main(<var>int</var> argc, <var>char</var>** argv) {
    
    <var>int</var> lines,cols;
    ifstream iFile;
    iFile.open(<kbd>"/home/cristiano/matrix3.dat"</kbd>);

    <var>if</var>(!iFile) { <cite>// file couldn't be opened</cite>
        cerr &lt;&lt; <kbd>"Error: file could not be opened"</kbd> &lt;&lt; endl;
        exit(1);
    }

    cols = matrix_cols(iFile);
    lines = matrix_lines(iFile);

<cite>//    vector&lt;vector&lt;double&gt; &gt; matrix;</cite>
<cite>//    matrix.resize(cols);</cite>
<cite>//    for(int i = 0; i &lt; cols; i++)</cite>
<cite>//        matrix[i].resize(lines);</cite>

    matrix_read(iFile, lines, cols);


    iFile.close();

    <var>return</var> (EXIT_SUCCESS);
}

</code></pre></td></tr></tbody></table></div>

</div>
<div class="dhow">
<span class="dbtn" id="CH_btn48202"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg50892"><span title="50892,11526,1023,1155,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg50892" title="Link to this post"><img src="Multi-Dimensional%20Arrays%20-%20C++%20Forum_files/link.png" height="8" width="16"></a> <span id="CH_zTm4df423dcbd" title="Sat, 09 May 2009 19:39:53 +0000">May 9, 2009 at 1:39pm</span><script type="text/javascript">WhenId('CH_zTm4df423dcbd');</script><noscript>May 9, 2009 at 7:39pm UTC</noscript></div>
<div class="dwho"><a href="http://www.cplusplus.com/user/kempofighter/"><b>kempofighter</b> (1155)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i50892">
@cstrieder: <b>I wouldn't recommend returning the vector as it will cost you dearly.  </b>you'd
 have to build a vector within the function and return it by value 
resulting in a copy after building the vector.  Multi-Dimensional arrays
 can get very large depending on their size and number of dimensions.  I
 would recommend passing an inout parameter to the function as a 
reference and then filling it for the caller.  The function would have a
 void return type.  First, create a typedef for the type so that you 
don't have to retype so much.<br>
<br>
<span class="auto"><code class="source"><var>typedef</var> std::vector&lt;vector&lt;<var>double</var>&gt; &gt; MatrixArrayType;</code></span><br>
<br>
<br>
Declare the function like so.  Notice that you don't need to pass cols 
and lines parameters anymore because the caller could simply build the 
inout parameter to the correct initial size.  Moreover, it is not good 
for Matrix_Read to assume things about the file.  You need to take into 
consideration that the contents of the file could cause it to grow.  <br>
<span class="auto"><code class="source"><var>void</var> matrix_read(istream &amp;iFile, MatrixArrayType&amp; theMatrix);</code></span>
</div>
<div class="dhow">
<span class="dbtn" id="CH_btn50892"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg50894"><span title="50894,11526,1023,1155,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg50894" title="Link to this post"><img src="Multi-Dimensional%20Arrays%20-%20C++%20Forum_files/link.png" height="8" width="16"></a> <span id="CH_zTmd8f05ab435" title="Sat, 09 May 2009 19:52:48 +0000">May 9, 2009 at 1:52pm</span><script type="text/javascript">WhenId('CH_zTmd8f05ab435');</script><noscript>May 9, 2009 at 7:52pm UTC</noscript></div>
<div class="dwho"><a href="http://www.cplusplus.com/user/kempofighter/"><b>kempofighter</b> (1155)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i50894">
@zaita: I think that this is a nice article.  I only have 2 minor critiques of it.  <br>
<br>
First, the following statement is not entirely true.  I see your point but it is worded incorrectly.<br>
<table class="quote"><tbody><tr><td class="qd">One final thing to note. 
When creating dynamic arrays with your own object types, you cannot 
overload the constructor. The ISO standard forbids this, and you must 
initialize the values on the objects later. All objects allocated into 
arrays must utilize the default constructor.</td></tr></tbody></table><br>
<br>
You can overload the constructor provided that you define the default 
constructor or provide a constructor that can be invoked without any 
arguments.  Take a look at this example.  It compiles just fine.  The 
constructor has default values so a point can be constructed without any
 user supplied arguments.<br>
<br>
<div class="auto"><table class="snippet"><tbody><tr><td class="rownum"><pre><code>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br></code></pre></td>
<td class="source"><pre><code><var>class</var> point
{
<var>public</var>:
	point(<var>int</var> x = 0, <var>int</var> y = 0) : x_(x), y_(y) { }
	<var>int</var> getX() <var>const</var> { <var>return</var> x_; }
	<var>int</var> getY() <var>const</var> { <var>return</var> y_; }

<var>private</var>:
	<var>int</var> x_;
	<var>int</var> y_;
};

<var>int</var> main()
{
	
	<cite>// Build a dynamic array of points</cite>
	point thePointArray[5][5];
	point** theDynPointArray = <var>new</var> point*[5];
	<var>for</var>(<var>int</var> i = 0; i &lt; 5; ++i)
		theDynPointArray[i] = <var>new</var> point[5];
	<var>return</var> 0;
}</code></pre></td></tr></tbody></table></div>
<br>
<br>
The only other suggestion I had was to provide a 3rd section on 
non-dynamic multi-dimensional arrays.  Perhaps the intent was to show 
how dynamic arrays are created but based on the title I thought it was 
about multi-dimensional arrays in general.  They don't have to be 
dynamic at all.  
</div>
<div class="dhow">
<span class="dbtn" id="CH_btn50894"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg51696"><span title="51696,13928,1023,6,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg51696" title="Link to this post"><img src="Multi-Dimensional%20Arrays%20-%20C++%20Forum_files/link.png" height="8" width="16"></a> <span id="CH_zTma785c6d922" title="Wed, 13 May 2009 21:53:12 +0000">May 13, 2009 at 3:53pm</span><script type="text/javascript">WhenId('CH_zTma785c6d922');</script><noscript>May 13, 2009 at 9:53pm UTC</noscript></div>
<div class="dwho"><a href="http://www.cplusplus.com/user/Polter/"><b>Polter</b> (6)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i51696">
Use the Boost Multidimensional Array Library:<br>
<a href="http://www.boost.org/doc/libs/1_39_0/libs/multi_array/doc/user.html">http://www.boost.org/doc/libs/1_39_0/libs/multi_array/doc/user.html</a><br>
<br>
Quoting synopsis:<br>
<br>
"The Boost Multidimensional Array Library provides a class template for 
multidimensional arrays, as well as semantically equivalent adaptors for
 arrays of contiguous data. The classes in this library implement a 
common interface, formalized as a generic programming concept. <b>The 
interface design is in line with the precedent set by the C++ Standard 
Library containers. Boost MultiArray is a more efficient and convenient 
way to express N-dimensional arrays than existing alternatives 
(especially the std::vector&lt;std::vector&lt;...&gt;&gt; formulation of
 N-dimensional arrays). </b>The arrays provided by the library may be 
accessed using the familiar syntax of native C++ arrays. Additional 
features, such as resizing, reshaping, and creating views are available 
(and described below). "<br>
<br>
Here's an example (from the same source):<br>
<div class="auto"><table class="snippet"><tbody><tr><td class="rownum"><pre><code>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br></code></pre></td>
<td class="source"><pre><code><dfn>#include "boost/multi_array.hpp"</dfn>
<dfn>#include &lt;cassert&gt;</dfn>

<var>int</var> 
main () {
  <cite>// Create a 3D array that is 3 x 4 x 2</cite>
  <var>typedef</var> boost::multi_array&lt;<var>double</var>, 3&gt; array_type;
  <var>typedef</var> array_type::index index;
  array_type A(boost::extents[3][4][2]);

  <cite>// Assign values to the elements</cite>
  <var>int</var> values = 0;
  <var>for</var>(index i = 0; i != 3; ++i) 
    <var>for</var>(index j = 0; j != 4; ++j)
      <var>for</var>(index k = 0; k != 2; ++k)
        A[i][j][k] = values++;

  <cite>// Verify values</cite>
  <var>int</var> verify = 0;
  <var>for</var>(index i = 0; i != 3; ++i) 
    <var>for</var>(index j = 0; j != 4; ++j)
      <var>for</var>(index k = 0; k != 2; ++k)
        assert(A[i][j][k] == verify++);

  <var>return</var> 0;
}</code></pre></td></tr></tbody></table></div>
<br>

</div>
<div class="dhow">
<span class="sedited">Last edited on <span id="CH_zTmd842abb1dc" title="Wed, 13 May 2009 21:54:11 +0000">May 13, 2009 at 3:54pm</span><script type="text/javascript">WhenId('CH_zTmd842abb1dc');</script><noscript>May 13, 2009 at 9:54pm UTC</noscript></span>
<span class="dbtn" id="CH_btn51696"></span>

</div>
</div>
</div>
</div><div class="rootinsMore"></div><div class="rootbtnMore"></div><div class="rootinsNew"></div><div class="rootbtnNew"></div><div id="CH_insNew"></div><div id="CH_reply">Topic archived. No new replies allowed.</div><div id="CH_subscription"></div><div class="rootedtNew"></div><script type="text/javascript">new for_PostList(7459,1,11177,0,'CH_PostList','CH_subscription','CH_reply','CH_insNew','CH_edttl','/forum/thread.cgi','/forum/post.cgi','/forum/myposts.cgi',64,32,512,256,1024,16);</script></div><div class="C_ad728">
<script type="text/javascript"><!--
google_ad_client = "ca-pub-7688470879129516";
google_ad_slot = "7973859818";
google_ad_width = 728;
google_ad_height = 90;
//-->
</script>
<script type="text/javascript" src="Multi-Dimensional%20Arrays%20-%20C++%20Forum_files/show_ads.js">
</script><ins style="display:inline-table;border:none;height:90px;margin:0;padding:0;position:relative;visibility:visible;width:728px"><ins id="aswift_1_anchor" style="display:block;border:none;height:90px;margin:0;padding:0;position:relative;visibility:visible;width:728px"><iframe marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" onload="var i=this.id,s=window.google_iframe_oncopy,H=s&amp;&amp;s.handlers,h=H&amp;&amp;H[i],w=this.contentWindow,d;try{d=w.document}catch(e){}if(h&amp;&amp;d&amp;&amp;(!d.body||!d.body.firstChild)){if(h.call){setTimeout(h,0)}else if(h.match){w.location.replace(h)}}" id="aswift_1" name="aswift_1" style="left:0;position:absolute;top:0;" frameborder="0" height="90" scrolling="no" width="728"></iframe></ins></ins>
</div></div><div id="I_nav">
<div class="sect root">
<h3><b><a href="http://www.cplusplus.com/">C++</a></b></h3>
<ul>
<li class="folder info"><a href="http://www.cplusplus.com/info/">Information</a></li>
<li class="folder doc"><a href="http://www.cplusplus.com/doc/">Documentation</a></li>
<li class="folder reference"><a href="http://www.cplusplus.com/reference/">Reference</a></li>
<li class="folder articles"><a href="http://www.cplusplus.com/articles/">Articles</a></li>
<li class="folder selected forum"><a href="http://www.cplusplus.com/forum/">Forum</a></li>
</ul>
</div>
<div class="sect">
<h3><b><a href="http://www.cplusplus.com/forum/">Forum</a></b></h3>
<ul>
<li><a href="http://www.cplusplus.com/forum/beginner/"><b>Beginners</b></a></li><li><a href="http://www.cplusplus.com/forum/windows/"><b>Windows Programming</b></a></li><li><a href="http://www.cplusplus.com/forum/unices/"><b>UNIX/Linux Programming</b></a></li><li><a href="http://www.cplusplus.com/forum/general/"><b>General C++ Programming</b></a></li><li><a href="http://www.cplusplus.com/forum/lounge/"><b>Lounge</b></a></li><li><a href="http://www.cplusplus.com/forum/jobs/"><b>Jobs</b></a></li></ul>
</div>
<div id="I_subnav"></div>
<div class="C_ad234">
<script type="text/javascript"><!--
google_ad_client = "ca-pub-7688470879129516";
google_ad_slot = "7445514729";
google_ad_width = 234;
google_ad_height = 60;
//-->
</script>
<script type="text/javascript" src="Multi-Dimensional%20Arrays%20-%20C++%20Forum_files/show_ads.js">
</script><ins style="display:inline-table;border:none;height:60px;margin:0;padding:0;position:relative;visibility:visible;width:234px"><ins id="aswift_2_anchor" style="display:block;border:none;height:60px;margin:0;padding:0;position:relative;visibility:visible;width:234px"><iframe marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" onload="var i=this.id,s=window.google_iframe_oncopy,H=s&amp;&amp;s.handlers,h=H&amp;&amp;H[i],w=this.contentWindow,d;try{d=w.document}catch(e){}if(h&amp;&amp;d&amp;&amp;(!d.body||!d.body.firstChild)){if(h.call){setTimeout(h,0)}else if(h.match){w.location.replace(h)}}" id="aswift_2" name="aswift_2" style="left:0;position:absolute;top:0;" frameborder="0" height="60" scrolling="no" width="234"></iframe></ins></ins>
</div></div>
<div id="I_midclear"></div>
</div></div>
<div id="I_bottom">
<div id="I_footer">
	<a href="http://www.cplusplus.com/">Home page</a> | <a href="http://www.cplusplus.com/privacy.do">Privacy policy</a><br>© cplusplus.com, 2000-2013 - All rights reserved - <i>v3.1</i><br><a href="http://www.cplusplus.com/contact.do?referrer=http%3A%2F%2Fwww.cplusplus.com%2Fforum%2Farticles%2F7459%2F">Spotted an error? contact us</a>
</div>
</div>


<script type="text/javascript">
<!--
function NavFor(us) {document.getElementById('I_subnav').innerHTML=us.ok?'<div class="sect"><h3><b><a href="/user/">'+us.user+'</a></b></h3><ul><li><a href="/forum/myposts.cgi">My topics</a></li></ul></div>':'';}onSession(NavFor);ready();
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-521783-1']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();

//-->
</script>


</body></html>